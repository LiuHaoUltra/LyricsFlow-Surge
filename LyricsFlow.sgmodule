#!name=ğŸµ LyricsFlow (Surge)
#!desc=Spotify æ­Œè¯å¢å¼ºæ¨¡å— (è¯·é…ç½® TYPEF_URL ä¸ºä½ çš„æœåŠ¡å™¨åœ°å€)
#!category=Music
#!system=ios
#!arguments=TYPEF_URL:ä½ çš„TypeFæœåŠ¡å™¨åœ°å€,ENABLE_ENRICH:false,ENRICH_URL:å¯é€‰AIåœ°å€,ENRICH_KEY:å¯é€‰APIå¯†é’¥,LogLevel:DEBUG

[Script]
# Request Script - æ‹¦æˆªæ­Œè¯è¯·æ±‚å¹¶ç¼“å­˜å…ƒæ•°æ®
# Pattern matches: gae1-spclient, guc3-spclient, spclient.wg, etc.
LyricsFlow_Req = type=http-request, pattern=^https?:\/\/(\w+-spclient|spclient\.wg)\.spotify\.com(:443)?\/color-lyrics\/v2\/track\/\w+\?(.*), requires-body=1, binary-body-mode=1, timeout=30, debug=1, script-path=https://raw.githubusercontent.com/LiuHaoUltra/LyricsFlow-Surge/main/dist/request.js, argument=TYPEF_URL={TYPEF_URL}&ENABLE_ENRICH={ENABLE_ENRICH}&ENRICH_URL={ENRICH_URL}&ENRICH_KEY={ENRICH_KEY}&LogLevel={LogLevel}

# Response Script - åªåŒ¹é…å¸¦ subtype=LyricsFlow å‚æ•°çš„è¯·æ±‚
LyricsFlow_Res = type=http-response, pattern=^https?:\/\/(\w+-spclient|spclient\.wg)\.spotify\.com(:443)?\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=LyricsFlow, requires-body=1, binary-body-mode=1, timeout=30, debug=1, script-path=https://raw.githubusercontent.com/LiuHaoUltra/LyricsFlow-Surge/main/dist/response.js, argument=TYPEF_URL={TYPEF_URL}&ENABLE_ENRICH={ENABLE_ENRICH}&ENRICH_URL={ENRICH_URL}&ENRICH_KEY={ENRICH_KEY}&LogLevel={LogLevel}

[MITM]
# Cover all spclient subdomains: guc?, gae?, gew?, etc.
hostname = %APPEND% api.spotify.com, spclient.wg.spotify.com, gae?-spclient.spotify.com, guc?-spclient.spotify.com, gew?-spclient.spotify.com
