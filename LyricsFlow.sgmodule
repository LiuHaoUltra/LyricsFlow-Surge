#!name=ğŸµ LyricsFlow (Surge)
#!desc=Intercepts Spotify lyrics requests and injects enhanced lyrics from a custom TypeF backend.
#!category=Music
#!system=ios

# é…ç½®åŒºåŸŸ â–¼â–¼â–¼
#!arguments=TYPEF_URL:http://127.0.0.1:8000,ENABLE_ENRICH:false,LogLevel:WARN
#!arguments-desc=TYPEF_URL: æ‚¨çš„ TypeF åç«¯åœ°å€ (ä¾‹å¦‚ http://1.2.3.4:8000); ENABLE_ENRICH: æ˜¯å¦å¼€å¯ AI å¢å¼º (true/false); LogLevel: æ—¥å¿—ç­‰çº§
# é…ç½®åŒºåŸŸ â–²â–²â–²

[Script]
# Request Script: æ‹¦æˆªå¹¶ç¼“å­˜å…ƒæ•°æ®
LyricsFlow_Req = type=http-request, pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+, requires-body=1, script-path=https://raw.githubusercontent.com/LiuHaoUltra/LyricsFlow-Surge/main/dist/request.js, argument=TYPEF_URL={{{TYPEF_URL}}}&ENABLE_ENRICH={{{ENABLE_ENRICH}}}&LogLevel={{{LogLevel}}}

# Response Script: æ³¨å…¥æ­Œè¯
# binary-body-mode=1 å¿…é¡»å¼€å¯
LyricsFlow_Res = type=http-response, pattern=^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+, requires-body=1, binary-body-mode=1, script-path=https://raw.githubusercontent.com/LiuHaoUltra/LyricsFlow-Surge/main/dist/response.js, argument=TYPEF_URL={{{TYPEF_URL}}}&ENABLE_ENRICH={{{ENABLE_ENRICH}}}&LogLevel={{{LogLevel}}}

[MITM]
hostname = %APPEND% spclient.wg.spotify.com, episode-transcripts.spotifycdn.com
